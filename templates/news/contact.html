{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Us - Daily News Flow{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold">Contact Us</h1>
                <p class="lead text-muted">
                    Have a question, suggestion, or feedback? We'd love to hear from you.
                </p>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- Contact Form -->
        <div class="col-lg-8 mb-5">
            <div class="contact-form">
                <h3 class="mb-4">Send us a Message</h3>
                
                <form method="post" action="{% url 'news:contact' %}">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="email" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="subject" class="form-label">Subject *</label>
                        <select class="form-select" id="subject" name="subject" required>
                            <option value="">Choose a subject...</option>
                            <option value="general">General Inquiry</option>
                            <option value="feedback">Feedback</option>
                            <option value="bug_report">Bug Report</option>
                            <option value="feature_request">Feature Request</option>
                            <option value="partnership">Partnership Opportunity</option>
                            <option value="press">Press Inquiry</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="message" class="form-label">Message *</label>
                        <textarea class="form-control" id="message" name="message" rows="6" placeholder="Please provide details about your inquiry..." required></textarea>
                    </div>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="newsletter" name="newsletter">
                        <label class="form-check-label" for="newsletter">
                            Subscribe to our newsletter for the latest updates
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-paper-plane me-2"></i>Send Message
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Contact Information -->
        <div class="col-lg-4">
            <div class="contact-info">
                <h3 class="mb-4">Get in Touch</h3>
                
                <div class="contact-item mb-4">
                    <div class="contact-icon">
                        <i class="fas fa-envelope fa-2x text-primary mb-3"></i>
                    </div>
                    <h5>Email Us</h5>
                    <p class="text-muted">
                        <a href="mailto:contact@dailynewsflow.com" class="text-decoration-none">
                            contact@dailynewsflow.com
                        </a>
                    </p>
                    <p class="small text-muted">We typically respond within 24 hours</p>
                </div>
                
                <div class="contact-item mb-4">
                    <div class="contact-icon">
                        <i class="fas fa-clock fa-2x text-primary mb-3"></i>
                    </div>
                    <h5>Response Time</h5>
                    <p class="text-muted">Monday - Friday: 9:00 AM - 6:00 PM (UTC)</p>
                    <p class="small text-muted">We aim to respond to all inquiries promptly</p>
                </div>
                
                <div class="contact-item mb-4">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt fa-2x text-primary mb-3"></i>
                    </div>
                    <h5>Our Mission</h5>
                    <p class="text-muted">
                        Providing global news coverage from trusted sources worldwide
                    </p>
                </div>
                
                <div class="contact-item">
                    <h5 class="mb-3">Follow Us</h5>
                    <div class="social-links">
                        <a href="#" class="btn btn-outline-primary btn-sm me-2 mb-2">
                            <i class="fab fa-facebook-f me-1"></i>Facebook
                        </a>
                        <a href="#" class="btn btn-outline-info btn-sm me-2 mb-2">
                            <i class="fab fa-twitter me-1"></i>Twitter
                        </a>
                        <a href="#" class="btn btn-outline-primary btn-sm me-2 mb-2">
                            <i class="fab fa-linkedin-in me-1"></i>LinkedIn
                        </a>
                        <a href="#" class="btn btn-outline-danger btn-sm me-2 mb-2">
                            <i class="fab fa-instagram me-1"></i>Instagram
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FAQ Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="text-center mb-5">Frequently Asked Questions</h3>
        </div>
    </div>
    
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq1">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                            How do you collect and verify news content?
                        </button>
                    </h2>
                    <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            We aggregate news from established, credible news organizations through their official APIs and RSS feeds. 
                            All content is clearly attributed to its original source, and we provide direct links to the full articles 
                            on the publishers' websites.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq2">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                            How often is the content updated?
                        </button>
                    </h2>
                    <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Our system continuously monitors news sources and updates content throughout the day. 
                            Most articles appear on our platform within minutes of being published by the original source.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq3">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                            Can I suggest a news source to be included?
                        </button>
                    </h2>
                    <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Yes! We're always looking to expand our coverage. Please use the contact form above and select 
                            "Feature Request" as the subject. Include the name and website of the news source you'd like us to consider.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq4">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4">
                            Is there a mobile app available?
                        </button>
                    </h2>
                    <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Currently, Daily News Flow is available as a responsive web application that works great on all devices. 
                            We're considering developing dedicated mobile apps in the future based on user demand.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq5">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5">
                            How can I report a technical issue?
                        </button>
                    </h2>
                    <div id="collapse5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Please use the contact form above and select "Bug Report" as the subject. Include as much detail as possible 
                            about the issue, including your browser type, device, and steps to reproduce the problem.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.contact-form {
    background: white;
    padding: 2rem;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
}

.contact-info {
    background: var(--light-color);
    padding: 2rem;
    border-radius: var(--border-radius);
    height: fit-content;
}

.contact-item {
    text-align: center;
    padding: 1rem 0;
    border-bottom: 1px solid #dee2e6;
}

.contact-item:last-child {
    border-bottom: none;
}

.contact-icon {
    text-align: center;
}

.accordion-button:not(.collapsed) {
    background-color: var(--primary-color);
    color: white;
}

.accordion-button:focus {
    box-shadow: none;
    border-color: var(--primary-color);
}

@media (max-width: 768px) {
    .contact-form,
    .contact-info {
        padding: 1.5rem;
        margin-bottom: 2rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Form validation
    const form = document.querySelector('form');
    const requiredFields = form.querySelectorAll('[required]');
    
    form.addEventListener('submit', function(e) {
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value.trim()) {
                isValid = false;
                field.classList.add('is-invalid');
                
                // Remove error class after user starts typing
                field.addEventListener('input', function() {
                    this.classList.remove('is-invalid');
                });
            }
        });
        
        if (!isValid) {
            e.preventDefault();
            // Scroll to first invalid field
            const firstInvalid = form.querySelector('.is-invalid');
            if (firstInvalid) {
                firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                firstInvalid.focus();
            }
        }
    });
    
    // Character counter for message field
    const messageField = document.getElementById('message');
    const maxLength = 1000;
    
    // Create character counter
    const counter = document.createElement('small');
    counter.className = 'text-muted';
    counter.textContent = `0/${maxLength} characters`;
    messageField.parentNode.appendChild(counter);
    
    messageField.addEventListener('input', function() {
        const length = this.value.length;
        counter.textContent = `${length}/${maxLength} characters`;
        
        if (length > maxLength * 0.9) {
            counter.classList.add('text-warning');
        } else {
            counter.classList.remove('text-warning');
        }
    });
    
    // Auto-resize textarea
    messageField.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
    });
});
</script>
{% endblock %}
